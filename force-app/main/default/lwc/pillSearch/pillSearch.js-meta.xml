<?xml version="1.0" encoding="UTF-8"?>
<LightningComponentBundle xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>60.0</apiVersion>
    <isExposed>true</isExposed>
    <description>Generic lookup/search component with pill display. Configurable for any Salesforce object with support for relationship fields and filters. Perfect for Screen Flows and Lightning Pages.</description>
    <masterLabel>Pill Search</masterLabel>
    
    <targets>
        <target>lightning__FlowScreen</target>
        <target>lightning__AppPage</target>
        <target>lightning__RecordPage</target>
        <target>lightning__HomePage</target>
    </targets>
    
    <targetConfigs>
        <targetConfig targets="lightning__FlowScreen">
            <!-- Output Properties (Record ID is now Input/Output to support pre-selection) -->
            <property name="selectedRecordId" type="String" label="Selected Record ID" description="ID of the selected record"/>
            <property name="selectedRecordName" type="String" role="outputOnly" label="Selected Record Name" description="Name/label of the selected record"/>
            <property name="selectedRecordIds" type="String[]" label="Selected Record IDs (Multi)" description="Collection of selected record IDs (Multi-select mode only)"/>
            
            <!-- Input Properties -->
            <property name="label" type="String" label="Label" description="Field label displayed above the component" default="Search" role="inputOnly"/>
            <property name="placeholder" type="String" label="Placeholder" description="Placeholder text in search input" default="Rechercher..." role="inputOnly"/>
            <property name="iconName" type="String" label="Icon Name" description="SLDS icon name (e.g., 'standard:account', 'standard:contact')" default="standard:record" required="true" role="inputOnly"/>
            <property name="sObjectType" type="String" label="Object API Name" description="Salesforce object API name (e.g., 'Account', 'Contact', 'CustomObject__c')" required="true" role="inputOnly"/>
            <property name="searchFields" type="String" label="Search Fields" description="Comma-separated fields to search (e.g., 'Name,Email' or 'Account.Name,Email'). Supports relationship fields." default="Name" required="true" role="inputOnly"/>
            <property name="labelField" type="String" label="Label Field" description="Field to display as main label (e.g., 'Name' or 'Account.Name'). Supports relationship fields." default="Name" required="true" role="inputOnly"/>
            <property name="sublabelField" type="String" label="Sublabel Field" description="Optional field to display as sublabel (e.g., 'Email' or 'Account.Industry'). Supports relationship fields." role="inputOnly"/>
            <property name="labelFormat" type="String" label="Label Format Template" description="Optional template for label formatting (e.g., '{Name} - {Email}'). Use field names in curly braces." role="inputOnly"/>
            <property name="sublabelFormat" type="String" label="Sublabel Format Template" description="Optional template for sublabel formatting (e.g., '{Field1} | {Field2}'). Use field names in curly braces." role="inputOnly"/>
            <property name="filterClause" type="String" label="Filter Clause" description="Optional WHERE clause filter (e.g., 'IsActive = true' or 'Type = \'Customer\' AND AccountId != null')" role="inputOnly"/>
            <property name="readOnly" type="Boolean" label="Read Only" description="Make the component read-only" default="false" role="inputOnly"/>
            <property name="required" type="Boolean" label="Required" description="Mark field as required" default="false" role="inputOnly"/>
            <property name="multiSelect" type="Boolean" label="Multi-Sélection" description="Active la sélection multiple. Les éléments sélectionnés s'affichent sous forme de plusieurs pills." default="false" role="inputOnly"/>
        </targetConfig>
        
        <targetConfig targets="lightning__AppPage,lightning__RecordPage,lightning__HomePage">
            <property name="label" type="String" label="Label" description="Field label" default="Search"/>
            <property name="placeholder" type="String" label="Placeholder" description="Placeholder text" default="Rechercher..."/>
            <property name="iconName" type="String" label="Icon Name" description="SLDS icon name" default="standard:record"/>
            <property name="sObjectType" type="String" label="Object API Name" description="Salesforce object API name" required="true"/>
            <property name="searchFields" type="String" label="Search Fields" description="Comma-separated fields to search" default="Name" required="true"/>
            <property name="labelField" type="String" label="Label Field" description="Field to display as label" default="Name" required="true"/>
            <property name="sublabelField" type="String" label="Sublabel Field" description="Field to display as sublabel"/>
            <property name="filterClause" type="String" label="Filter Clause" description="Optional WHERE clause filter"/>
            <property name="readOnly" type="Boolean" label="Read Only" default="false"/>
            <property name="required" type="Boolean" label="Required" default="false"/>
            <property name="multiSelect" type="Boolean" label="Multi-Sélection" default="false"/>
        </targetConfig>
    </targetConfigs>
</LightningComponentBundle>
